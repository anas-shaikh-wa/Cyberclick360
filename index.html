<!DOCTYPE html>
<html>
<head>
  <title>Loading…</title>
</head>
<body>
  <p>Loading document…</p>

<script>
(function () {
  const params = new URLSearchParams(window.location.search);

  const payload = {
    user_id: params.get("id"),
    campaign_id: params.get("cid"),
    company: params.get("company"),
    user_agent: navigator.userAgent,
    referrer: document.referrer,
    timestamp: new Date().toISOString()
  };
  console.log(payload) ;

  if (!payload.user_id || !payload.campaign_id) return;

  fetch("http://127.0.0.1:5000/api/track-click", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify(payload)
  }).catch(() => {});

})();
</script>

</body>
</html>
